<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>TurtleScript tile test</title>
<!-- jquery stuff -->
<link href="jquery/pepper-grinder/jquery-ui-1.8.2.custom.css"
      rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery/jquery-1.4.2.js"></script>
<script type="text/javascript" src="jquery/jquery-ui-1.9pre.js"></script>

<!-- my stuff -->
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
<script src="./global.js" type="text/javascript"></script>
<script src="./tokens.js" type="text/javascript"></script>
<script src="./parse.js" type="text/javascript"></script>
<script src="./compile.js" type="text/javascript"></script>
<script src="./render.js" type="text/javascript"></script>
<script src="./tests.js" type="text/javascript"></script>
<script type="text/javascript">
$(function() {
  // generate some stuff on the canvas
  var parse = make_parse();
  var compile = make_compile();
  var source = make_tests(make_parse, make_compile)[12];
  //$("#debug").append(html_escape(source)+"\n");
  var tree = parse(source);
  //$("#debug").append(html_escape(compile(tree)));
  var render = make_render();
  var elem = render(tree);
  //$("#debug").append(html_escape(elem.toSource()));
  $("#test").append(render(tree));

  $(".ts ul").sortable({
    placeholder: 'placeholder active',
    forcePlaceholderSize: true, // use dynamic size of draggable if height=0
    revert: 100/*ms: fast revert*/,
    tolerance: 'pointer',
    distance: 0,
    cancel: '.placeholder',
    //items: '> *:not(.fixed)',
    cursor: 'default',
    //cursorAt: { bottom: 0, right: 0 }, // iphone only?
  });
  var interconnect = [
    // statements can be dropped on other statement lists
    ".ts .block > ul",
    // expressions can be dropped on other expressions
    ".ts ul.expr",
    // variables in var/argument lists can be dropped on each other
    ".ts ul.arguments, .ts ul.variables",
  ];
  var i=0;
  while (i < interconnect.length) {
    $(interconnect[i]).sortable( "option", "connectWith", interconnect[i] );
    i += 1;
  }

  $(".ts > div.function").draggable();
  $(".ts, .ts ul, .ts li, .ts span, .ts *").disableSelection().
    css("WebkitUserSelect", "none");
});
</script>
<style type="text/css">
#canvas {
  border: 1px solid #ccc;
}

/* just make sure the footer is properly at the bottom */
hr { clear: both; }
</style>
</head>

<body>
<h1>TurtleScript tile test</h1>

<pre id="debug">
</pre>
<div id="canvas" class="ts">

  <div class="function">
    <div class="header">function <span class="name">test</span>
      (<ul class="arguments"></ul>) {</div>
    <div class="block" id="test">
     <div class="variables">
      var <ul class="variables"><li class="placeholder"></li></ul>;
     </div>
    </div>
    <div class="footer">}</div>
  </div>

  <div class="function">
    <div class="header">function <span class="name">foo</span>
      (<ul class="arguments"><li class="name">a</li><li class="name">b</li></ul>) {</div>
    <div class="block">
     <div class="variables">
      var <ul class="variables"><li class="name">c</li></ul>;
     </div>
     <ul>
      <li class="stmt">
        <ul class="expr fixed"><!-- a expression statement -->
          <li class="binop">
            <ul class="expr"><li class="name">c</li></ul>
            <span class="op">=</span>
            <ul class="expr"><li class="name">b</li></ul>
          </li>
        </ul>
        ;
      </li>

      <li class="stmt">
        <div class="header">while
          (<ul class="expr"><li class="literal">1</li></ul>) {
        </div>
        <div class="block">
          <div class="variables">
            var <ul class="variables"><li class="placeholder"></li></ul>;
          </div>
          <ul><li class="stmt">break;</li></ul>
        </div>
        <div class="footer">}</div>
      </li>

      <li class="stmt">return
        <ul class="expr">
          <li class="binop">
            <ul class="expr"><li class="name">a</li></ul>
            <span class="op">+</span>
            <ul class="expr"><li class="name">b</li></ul>
          </li>
        </ul>
        ;
      </li>
    </ul>
    </div>
    <div class="footer">}</div>
  </div>

</div>

<hr>
<address></address>
<!-- hhmts start -->Last modified: Thu Jul  8 20:06:58 EDT 2010 <!-- hhmts end -->
</body> </html>
