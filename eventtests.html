<!DOCTYPE html>
<html>
<head>
<title>Event test suite</title>
</head>
<body>
<h1>Event test suite</h1>
<div id="status"></div>
<div id="errors"></div>
<div id="info"></div>
<pre>
<script type="text/javascript" src="./global.js"></script>
<script type="text/javascript" src="./extensions.js"></script>
<script type="text/javascript" src="./events.js"></script>
<script type="text/javascript" src="./eventtests.js"></script>
<script type="text/javascript">

var flapjax = make_flapjax(window.setTimeout, window.clearTimeout);
var errors = "", infos = "";
function error(str) {
  console.log("ERROR", str);
  document.write("ERROR: "+str+"\n");
  errors += "<li>"+html_escape(str)+"</li>\n";
}
function info(str) {
  document.write("INFO: "+str+"\n");
  infos += "<li>"+html_escape(str)+"</li>\n";
}
flapjax_tests(flapjax, info, error);

function fill(elem_id, h1, contents, no_escape) {
  if (!no_escape) contents = html_escape(contents);
  elem = document.getElementById(elem_id);
  elem.innerHTML = "<h2>" + h1 + "</h2>\n" + contents;
}

fill('status', errors ? 'Failed.' : 'Success!', '');
// put infos and errors into appropriate elements
if (infos && false) {
  fill('info', 'Informational messages', '<ul>'+infos+'</ul>', true);
}
if (errors) {
  fill('errors', 'Errors', '<ol>'+errors+'</ol>', true);
}
</script>
</pre>
</body> </html>
